@page "/pizzas"
@using PizzaStoreApp.Shared.Models
@inject PizzaStoreApp.Client.Services.PizzaService PizzaService

<h3>Liste des pizzas</h3>

@if (error != null)
{
    <p class="text-danger">Erreur : @error</p>
}
else if (pizzas == null)
{
    <p>Chargement...</p>
}
else if (!pizzas.Any())
{
    <p>Aucune pizza trouvée</p>
}
else
{
    <ul>
        @foreach (var pizza in pizzas)
        {
            <li>@pizza.Name - @pizza.Price €</li>
        }
    </ul>
}

@code {
    List<Pizza>? pizzas;
    string? error;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            pizzas = await PizzaService.GetAllAsync();
        }
        catch (Exception ex)
        {
            error = ex.Message;
        }
    }
}
