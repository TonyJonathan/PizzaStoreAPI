@page "/"
@page "/pizzas"

@using PizzaStoreApp.Shared.Models
@inject PizzaStoreApp.Client.Services.PizzaService PizzaService


@* 
<button class="btn btn-primary mb-3" @onclick="ToggleForm">➕ Ajouter</button> *@

@if (error != null)
{
    <p class="text-danger">Erreur : @error</p>
}
else if (pizzas == null)
{
    <div class="container">
        <h3>Liste des pizzas 🍕</h3>
        <p>Chargement...</p>
    </div>
}
else if (!pizzas.Any())
{
    <div class="container">
        <h3>Liste des pizzas 🍕</h3>
        <p>Aucune pizza trouvée</p>
    </div>
}
else
{   
    <div class="container">
        <h3>Liste des pizzas 🍕</h3>
        <div class="pizza-caracteristics">
           <h4>Nom</h4>
           <h4>Prix</h4>
           <h4>Sans gluten</h4>
        </div>

        <ul>
            @foreach (var pizza in pizzas)
            {
                <li>
                    <p>@pizza.Name</p>
                    <p>@pizza.Price €</p>
                    <p>@(@pizza.IsGlutenFree ? "✅" : "❌")</p>
                </li>
            }
        </ul>
    </div>
}

@code {
    List<Pizza>? pizzas;
    string? error;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            pizzas = await PizzaService.GetAllAsync();
        }
        catch (Exception ex)
        {
            error = ex.Message;
        }
    }
}
